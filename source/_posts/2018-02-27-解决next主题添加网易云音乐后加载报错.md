---
title: 解决next主题添加网易云音乐后加载报错
date: 2018-02-27 10:05:36
tags: Hexo
categories: 工具
---
　　之前老遇到页面加载的时候出现网易云的弹窗“资源加载失败”，感觉跟 next 主题加载页面时的动效有关系，很暴力地把 iframe 的 src 都改成 onload 后延时加载，然后就没遇到过了，记录一下这个问题。<!--more-->  
　　添加背景音乐，在 `themes\next\layout\_custom\sidebar.swig` 文件中添加下面的代码：
```html
<!--网易云音乐外嵌iframe-->
<div>
	<iframe id="iframer" frameborder="no" border="0" marginwidth="0" marginheight="0" width=220 height=86 src=""></iframe>
</div>

<script language='javascript' type='text/javascript'>
	window.onload = function(){
		setTimeout(function () {
			var iframer = document.getElementById("iframer");
			iframer.setAttribute("src","//music.163.com/outchain/player?type=2&id=442308&auto=0&height=66");
		}, 1000);
	}
</script>
```
<div style="text-align:center">
    <iframe id="iframer" frameborder="no" border="0" marginwidth="0" marginheight="0" width=400 height=86 src="//music.163.com/outchain/player?type=2&id=442308&auto=0&height=66"></iframe>
	这个外嵌我没加 setTimeout ，不知道这个页面会不会出现弹框 bug
</div>